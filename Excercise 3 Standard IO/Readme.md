# Exercise 3: A Simple File Logger in C

This project provides a simple, reusable, and flexible logging utility in C. It allows an application to write formatted log messages to a designated file, complete with timestamps, severity levels, and source code location.

## What it Does (Purpose)

The primary goal of this logger is to offer a straightforward way to record events, errors, and debugging information during a program's execution. Instead of printing everything to the console, it saves the output to a file (`app.txt` in this example), creating a persistent record that can be reviewed later for debugging or monitoring purposes.

This is a fundamental tool for developing more complex applications, as it helps track the program's flow and diagnose issues without interfering with the user interface.

## Key Features

- **Multiple Log Levels**: Supports eight different severity levels, from `LOG_DEBUG` for detailed debugging to `LOG_EMERGENCY` for critical system failures.
- **Log Filtering**: You can set a global log level (`logger_set_level`). The logger will only write messages that are of that level or higher severity, ignoring less critical ones.
- **Automatic Timestamps**: Every log entry is automatically prefixed with the current date and time (`YYYY-MM-DD HH:MM:SS`).
- **Source Code Location**: Automatically includes the source file name and line number (`__FILE__` and `__LINE__`) where the log message was called, making it easy to pinpoint the origin of an event.
- **Formatted Messages**: Supports `printf`-style formatting, allowing you to include variable values in your log messages.
- **Easy Integration**: Designed as a simple module (`logger.c` and `logger.h`) that can be easily dropped into other C projects.

## File Descriptions

- `logger.h`: The header file that defines the public interface for the logger. It contains the `log_level_t` enum, function prototypes (`logger_init`, `logger_set_level`, etc.), and the convenient `log_message` macro that simplifies calling the logger.
- `logger.c`: The implementation file. It contains all the logic for opening/closing the log file, formatting the messages, checking log levels, and writing to the file.
- `main.c`: An example program that demonstrates how to use the logger. It initializes the logger, sets the log level, sends several messages with different severities, and then properly cleans up resources.

## How to Compile and Run

1. **Compile the code:**
   Open a terminal or command prompt in the project directory and run the following command. This will compile `main.c` and `logger.c` and link them into a single executable file named `logger_demo.exe`.

   ```sh
   gcc main.c logger.c -o logger_demo.exe
   ```

2. **Run the executable:**
   Execute the compiled program.

   ```sh
   .\logger_demo.exe
   ```

3. **Check the output:**
   After the program runs, a new file named `app.txt` will be created in the same directory. This file contains the log messages generated by the program.

## Example Output (`app.txt`)

The content of `app.txt` will look similar to this (timestamps will vary):

```log
[2025-10-18 10:30:00] [EMERGENCY] [main.c:21] Canh bao
[2025-10-18 10:30:00] [ALERT]     [main.c:22] Canh bao
[2025-10-18 10:30:00] [CRITICAL]  [main.c:23] Canh bao
[2025-10-18 10:30:00] [ERROR]     [main.c:24] Canh bao
[2025-10-18 10:30:00] [WARNING]   [main.c:25] Canh bao
[2025-10-18 10:30:00] [NOTICE]    [main.c:26] Canh bao
[2025-10-18 10:30:00] [INFO]      [main.c:27] Canh bao
[2025-10-18 10:30:00] [DEBUG]     [main.c:28] Canh bao
```
